{% extends "base.html" %}

{% block title %}Home{% endblock %}

{% block content %}
<div class="jumbotron">
  <h1>Welcome to Flask Showcase</h1>
  <p>This application demonstrates key Flask features including:</p>
  <ul>
    <li>Routing and HTTP methods</li>
    <li>PostgreSQL database integration (without ORM)</li>
    <li>User authentication and session management</li>
    <li>Template rendering with Jinja2</li>
    <li>Form handling and validation</li>
    <li>API endpoints returning JSON</li>
    <li>Error handling</li>
  </ul>
  <hr>
  <p>Explore the application by navigating through the links above.</p>
  {% if not g.user %}
  <a class="btn" href="{{ url_for('main.register') }}">Get Started</a>
  {% endif %}
</div>

<h2>Recent Posts</h2>
{% if posts %}
  <div class="posts-grid">
    {% for post in posts %}
      <div class="card">
        <h3 class="card-title">{{ post.title }}</h3>
        <p class="card-text">{{ post.content[:100] }}{% if post.content|length > 100 %}...{% endif %}</p>
        <p class="card-text">
          <small class="text-muted">By {{ post.username }} on {{ post.created_at.strftime('%Y-%m-%d') }}</small>
        </p>
        <a href="{{ url_for('main.post_detail', post_id=post.id) }}" class="btn">Read More</a>
      </div>
    {% endfor %}
  </div>
{% else %}
  <p>No posts yet. <a href="{{ url_for('main.create_post') }}">Create the first post!</a></p>
{% endif %}
{% endblock %}